# ADR-006: MVP Scope

Status: Accepted (updated 2026-02-19)
Date: 2026-02-19
Deciders: @owner

## Context

Документация описывает обширный MVP. Бэкенд не разрабатывается. Необходимо определить реалистичный скоуп первой версии для solo-dev.

Обновлено: вместо "разовая запись → один результат" основной режим — непрерывный мониторинг (Live Detection) с лентой обнаруженных видов.

## Decision

**MVP: Live Detection + история + настройки.**

### В скоупе MVP:

1. **Live Detection (главный экран)** — см. ADR-010
   - Непрерывный анализ аудиопотока через AudioRecord + BirdNET TFLite
   - Управление: Start / Pause / Stop / Reset
   - Живая лента обнаруженных видов (confidence ≥ 80%)
   - Chunking аудио (3-5 сек окна) → ML inference → фильтр по порогу
   - Сохранение аудиофрагментов обнаруженных видов
   - Foreground Service для непрерывной записи

2. **Detail Screen (экран вида)**
   - Название вида (RU/EN + научное)
   - Confidence, время обнаружения, GPS
   - Воспроизведение записанного аудиофрагмента
   - Автопауза анализа при воспроизведении
   - Placeholder для будущего справочника (описание, фото)

3. **История наблюдений**
   - Список всех сохранённых наблюдений (карточки)
   - Фильтрация по видам, датам
   - Прослушивание сохранённых записей
   - Удаление записей

4. **Настройки**
   - Переключение языка (RU/EN)
   - Переключение темы (светлая/тёмная/системная)
   - Настройки разрешений

5. **Локализация:** RU + EN с первой версии

6. **Тема:** Светлая + тёмная (Material Design 3, dynamic colors)

### НЕ в скоупе MVP (следующие релизы):

- Умная аудио-ловушка (VAD-триггер, интеллектуальные фильтры, автоочистка)
- Синхронизация с сервером / бэкенд
- Авторизация
- Справочник птиц (контент: описания, фото, ареалы)
- Экспедиции, геймификация

### Формат превью UI:

Jetpack Compose @Preview — прототипирование UI непосредственно в коде проекта. Превью компонентов видны в Android Studio без запуска эмулятора. Код прототипа = продакшн код.

## Consequences

### Positive
- Live Detection — полноценный продукт для полевого мониторинга с первой версии
- Непрерывный анализ ближе к конечному видению продукта чем "разовая запись"
- Foreground Service закладывается сразу — фундамент для умной ловушки в будущем

### Negative
- Сложнее "разовой записи": Foreground Service, chunking, управление состояниями, конкурентный доступ к микрофону
- Больший расход батареи при непрерывном анализе
- Больше edge cases: фоновая работа, переключение приложений, звонки

### Neutral
- Умная ловушка (VAD, фильтры) — следующий релиз поверх уже работающего непрерывного анализа
- Detail Screen расширяется справочником без изменения архитектуры

## Alternatives Considered

- **Разовая запись → один результат** (первоначальный план) — проще, но не соответствует видению продукта как инструмента мониторинга. Отклонено
